!function(){function c(c){function t(c){u=c}function e(t){var e=angular.copy(r);return null!==t&&angular.isObject(t)&&(e.maxRepeat=t.maxRepeat?t.maxRepeat:e.maxRepeat,e.accuracy=t.accuracy?t.accuracy:e.accuracy,e.timeout=t.timeout?t.timeout:e.timeout,e.enableHighAccuracy=t.enableHighAccuracy?t.timeout:e.enableHighAccuracy),c(function(c,t){ionic.Platform.ready(function(){a(e,c,t)})})}function a(c,t,e){var a={},i=!0;a.watchId=u.watchPosition(function(n){i&&(a.currentPosition=n,i=!1,o(0,t,e,c,a))},function(c){e(c)},{timeout:c.timeout,enableHighAccuracy:c.enableHighAccuracy})}function o(c,t,e,a,r){u.getCurrentPosition(function(u){u.coords.accuracy<=a.accuracy?(i(r),t(u)):(c+=1,r.currentPosition=n(u,r.currentPosition),c>=a.maxRepeat?(i(r),e({code:999,message:"Too many repetitions",bestPosition:r.currentPosition})):o(c,t,e,a,r))},function(c){c.bestPosition=r.currentPosition,e(c)},{timeout:a.timeout,enableHighAccuracy:a.enableHighAccuracy})}function i(c){u.clearWatch(c.watchId)}function n(c,t){return c.coords.accuracy>t.coords.accuracy?c:t}var r={maxRepeat:5,accuracy:10,timeout:2e4,enableHighAccuracy:!0},u=navigator.geolocation,y={retrieveLocation:e,overrideService:t};return y}angular.module("location-retriever",["ionic"]).factory("LocationRetriever",c),c.$inject=["$q"]}();