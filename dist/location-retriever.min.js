!function(){function c(c){function t(c){u=c}function e(t){var e=angular.copy(r);return null!==t&&angular.isObject(t)&&(e.maxRepeat=t.maxRepeat?t.maxRepeat:e.maxRepeat,e.accuracy=t.accuracy?t.accuracy:e.accuracy,e.timeout=t.timeout?t.timeout:e.timeout,e.enableHighAccuracy=t.enableHighAccuracy?t.timeout:e.enableHighAccuracy),c(function(c,t){ionic.Platform.ready(function(){a(e,c,t)})})}function a(c,t,e){var a={},o=!0;a.watchId=u.watchPosition(function(n){o&&(a.currentPosition=n,o=!1,i(0,t,e,c,a))},function(c){c.bestPosition=null,e(c)},{timeout:c.timeout,enableHighAccuracy:c.enableHighAccuracy})}function i(c,t,e,a,r){u.getCurrentPosition(function(u){if(u.coords.accuracy<=a.accuracy)o(r),t(u);else if(c+=1,r.currentPosition=n(u,r.currentPosition),c>=a.maxRepeat){o(r);var l={code:999,message:"Too many repetitions",bestPosition:r.currentPosition};e(l)}else i(c,t,e,a,r)},function(c){o(r),c.bestPosition=r.currentPosition,e(c)},{timeout:a.timeout,enableHighAccuracy:a.enableHighAccuracy})}function o(c){u.clearWatch(c.watchId)}function n(c,t){return c.coords.accuracy>t.coords.accuracy?c:t}var r={maxRepeat:5,accuracy:10,timeout:2e4,enableHighAccuracy:!0},u=navigator.geolocation,l={retrieveLocation:e,overrideService:t};return l}angular.module("location-retriever",["ionic"]).factory("LocationRetriever",c),c.$inject=["$q"]}();